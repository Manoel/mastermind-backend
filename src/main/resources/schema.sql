CREATE SCHEMA mastermind;

CREATE TABLE mastermind.GAME (id VARCHAR(36) PRIMARY KEY, start_time TIMESTAMP NOT NULL, code VARCHAR(8) NOT NULL, multiplayer INTEGER NOT NULL, first_player VARCHAR(60) NOT NULL, second_player VARCHAR(60));

CREATE TABLE mastermind.PAST_RESULT(id INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) PRIMARY KEY, exact INTEGER NOT NULL, guess VARCHAR(8) NOT NULL, near INTEGER NOT NULL, game_id VARCHAR(36) NOT NULL );

ALTER TABLE mastermind.PAST_RESULT ADD CONSTRAINT fk_past_result_game FOREIGN KEY (game_id) REFERENCES mastermind.GAME (id) ON DELETE CASCADE;

-- CREATE TABLE mastermind.USER (id INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) PRIMARY KEY, name VARCHAR(60) NOT NULL, game_id VARCHAR(36) NOT NULL);

-- ALTER TABLE mastermind.USER ADD CONSTRAINT fk_user_game FOREIGN KEY (game_id) REFERENCES mastermind.GAME (id) ON DELETE CASCADE;

-- ALTER TABLE mastermind.GAME ADD CONSTRAINT fk_game_first_player FOREIGN KEY (first_player) REFERENCES mastermind.USER (id) ON DELETE CASCADE;

-- ALTER TABLE mastermind.GAME ADD CONSTRAINT fk_game_second_player FOREIGN KEY (second_player) REFERENCES mastermind.USER (id) ON DELETE CASCADE;


--CREATE TABLE travelplanner.TRIP (id VARCHAR(36) PRIMARY KEY, destination VARCHAR(60) NOT NULL, start_date DATE NOT NULL, end_date DATE NOT NULL, comment VARCHAR(500), user_id VARCHAR(36) NOT NULL);

--CREATE TABLE travelplanner.ROLE(id INTEGER PRIMARY KEY, name VARCHAR(20) NOT NULL);

--CREATE TABLE travelplanner.USER_ROLE(user_id VARCHAR(36) NOT NULL, role_id INTEGER NOT NULL);

--ALTER TABLE travelplanner.TRIP ADD CONSTRAINT fk_trip_user FOREIGN KEY (user_id) REFERENCES travelplanner.USER (id) ON DELETE CASCADE;

--ALTER TABLE travelplanner.USER_ROLE ADD CONSTRAINT fk_user_role_user FOREIGN KEY (user_id) REFERENCES travelplanner.USER (id) ON DELETE CASCADE;

--ALTER TABLE travelplanner.USER_ROLE ADD CONSTRAINT fk_user_role_role FOREIGN KEY (role_id) REFERENCES travelplanner.ROLE (id);